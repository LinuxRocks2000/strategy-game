<!DOCTYPE html>

<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="mod.css">
        <title>Alternative Client for MMOSG</title>
    </head>
    <body>
        <div id="gameui">
            <canvas id="background" style="display: none;"></canvas>
            <canvas id="game">
                Use a real browser to play this game, dammit
            </canvas>
        </div>
        <div id="startscreen">
            <div id="sidepanel">
                <form action="" id="startform" onsubmit="setTimeout(play, 0); return false;">
                    <h2>Server</h2>
                    <input type="text" name="server-url" id="server-url" placeholder="Server URL" />
                    <h2>Spectator Mode</h2>
                    <input type="checkbox" name="spectator" id="spectator" onchange="updateForm()">
                    Spectating? <label for="spectator" id="speclabel"></label>
                    <h2 class="hide_when_spectating">Banner</h2>
                    <input class="hide_when_spectating" type="text" name="banner-name" id="banner" placeholder="Your anonymous handle" onfocusout="randomizeBanner()"/>
                    <h2 class="hide_when_spectating">Password</h2>
                    <input class="hide_when_spectating" type="text" name="password-input" id="password" placeholder="Empty unless otherwise stated"/>
                    <h2 class="hide_when_spectating">Play Mode</h2>
                    <input type="radio" name="playmode" id="normal" class="playmode" value="normal" checked>
                    <label class="hide_when_spectating" for="normal">Normal (Strategic; x4 fighters, 100c)</label>
                    <input type="radio" name="playmode" id="rtf" class="playmode" value="rtf">
                    <label class="hide_when_spectating" for="rtf">RTF (Real Time Fighter; x2 fighters, 0c)</label>
                    <input type="radio" name="playmode" id="defender" class="playmode" value="defender">
                    <label class="hide_when_spectating" for="defender">Defensive (Strategic; x2 fighters, x2 turrets, 25c)</label>
                    <button type="submit">Start</button>
                </form>
            </div>
            <div id="talk">
                <noscript>
                    Enable JavaScript to play this game, dammit
                </noscript>
                <h1>MMOSG</h1>
                <p style="text-align: center;">
                    <b><i>Massively Multiplayer Online Strategy Game</i></b>
                </p>
                <p>
                    This is a web game made by <span class="banner">Tyler Clarke<span>pusheen</span></span>
                    and <span class="banner">ThatLittleFrog<span>frog</span></span> with
                    contributions from many others, especially <span class="banner">Jakie<span>1000D</span></span>.
                </p>
                <div>
                    Most MMOSG servers come with a built-in UI, but as this is an external modified UI, you have to specify a server.
                    You can manually type a url for it in the sidebar, or select one of of the <b>Famous Servers</b>:
                    <ul id="famous">
                        <li onclick="set('wss://swaous.asuscomm.com/mmosg/game')">The 24/7 Server - swaous.asuscomm.com</li>
                        <li onclick="set('wss://swaous.asuscomm.com/awesome/game')">Development build; not always running (and sometimes containing non-MMOSG applications) - swaous.asuscomm.com.</li>
                        <li onclick="set('ws://localhost:3000/game')">Local Development, if you're doin' some coding</li>
                    </ul>
                </div>
                <p>
                    Interested in MMOSG development or just want to peek under the hood? Check out the <a href="https://github.com/LinuxRocks2000/strategy-game">Strategy Game/MMOSG Github</a>, or read the <a href="doc/">documentation for this server release.</a>
                </p>
            </div>
        </div>
        <div id="establishin" class="textview">
            <div>
                Establishing Connection<br>
                Please Wait
            </div>
        </div>
        <div id="failedToConnect" class="textview">
            <div>
                Connection failed.
            </div>
        </div>
        <div id="youLose" class="textview">
            <div>
                You have died.
            </div>
        </div>
        <div id="youWin" class="textview">
            <div>
                You win!
            </div>
        </div>
        <div id="gameOver" class="textview">
            <div>
                The game has ended. <span id="winnerBanner"></span> wins.
            </div>
        </div>
        <div id="allownotifs">
            Please <a href="javascript:allowNotifs()">click here</a> to allow notifications for this website! Or don't, it's your choice.<br>
            <small>We can't just <i>ask</i> the normal way because of some dumb browser rules, so here's a super obtrusive screen.<br>
            <small><a href="javascript:screen('startscreen')">click here</a> to exit without making a decision.</small></small>
        </div>
        <script>
            function set(url) {
                document.getElementById("server-url").value = url;
            }
            function updateForm() {
                if (document.getElementById("spectator").checked) {
                    Array.from(document.getElementsByClassName("hide_when_spectating")).forEach(el => {
                        el.style.display = "none";
                    });
                }
                else {
                    Array.from(document.getElementsByClassName("hide_when_spectating")).forEach(el => {
                        el.style.display = "";
                    });
                }
            }
            updateForm();
        </script>
        <script>
            function prerenderBackground() {

            }
            const diva = false; // set to true to make the webgl image a certain size (defined below) and usable for downloading or whatever
            const divaW = 5000;
            const divaH = 5000;
        </script>
        <!-- images -->
        <img src="res/castle.svg" id="castle" />
        <img src="res/ship.svg" id="ship" />
        <img src="res/chest.svg" id="chest" />
        <img src="res/wall.svg" id="wall" />
        <!-- scripts -->
        <script src="vector.js"></script>
        <script src="metaballs-gl.js"></script>
        <script src="mod.js"></script>
    </body>
</html>